<div class="container">
    <h1 class="text-center">Khoá học của tôi</h1>

    <table class="table table-striped mt-4">
        <thead>
            <tr>
                <th scope="col">STT</th>
                <th scope="col">Tên</th>
                <th scope="col">Mô tả ngắn</th>
                <th scope="col text-center" colspan="2">Action</th>
            </tr>
        </thead>
        <tbody>

            {{#each courses}}
            <tr>
                <th scope="row">{{ sum @index 1 }}</th>
                <td>{{ this.name }}</td>
                <td>{{ this.description }}</td>
                <td>
                    <a href="/courses/{{ this._id }}/edit">Sửa</a>
                </td>
                <td>
                    <a href="javascript:void(0)" data-toggle="modal" data-target="#modal-delete-course"
                        data-id="{{ this._id }}" class="btn-delete-course">Xoá</a>
                </td>
            </tr>
            {{/each }}
        </tbody>
    </table>
</div>

<div class="modal fade" id="modal-delete-course" tabindex="-1" role="dialog" aria-labelledby="modal-delete-courseLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Xoá khoá học</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn xoá khoá học này?
            </div>
            <div class="modal-footer">
                <form method="POST" id="form-confirm-delete">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Huỷ</button>
                    <button type="submit" class="btn btn-danger">Xoá</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>

    window.addEventListener('DOMContentLoaded', (event) => {
        let id
        const btnDelete = $('.btn-delete-course')
        const formConfirmDelete = $('#form-confirm-delete')

        btnDelete.click(function (e) {
            e.preventDefault()
            id = $(this).data('id')
            const action = `/courses/${id}?_method=DELETE`
            formConfirmDelete.attr('action', action);
        })


        formConfirmDelete.submit(function (e) {
            console.log(id, 'haha 123')

        });

    });

</script>